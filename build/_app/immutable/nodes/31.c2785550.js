import{s as Z,p as ee,f as m,a as E,g,h as Y,A as B,c as C,d as b,j as f,i as j,x as i,C as te,o as ae,y as le,D as se,l as U,m as V,B as O,n as R,K,M as re,H as ne}from"../chunks/scheduler.2ba080f3.js";import{S as oe,i as de,f as ie,b as ce,d as ue,m as fe,a as pe,t as he,e as me}from"../chunks/index.e182e4d1.js";import{e as X}from"../chunks/each.e59479a4.js";import{M as ge}from"../chunks/Modal.8169fecd.js";import{b as _e}from"../chunks/helper.1bedf073.js";import{d as H,p as ve,a as N,L as G}from"../chunks/schema.b06cae25.js";function J(c,e,a){const n=c.slice();return n[11]=e[a],n}function be(c){let e,a='<div class="text-center">Tidak ada upgrade</div>';return{c(){e=m("div"),e.innerHTML=a,this.h()},l(n){e=g(n,"DIV",{class:!0,"data-svelte-h":!0}),B(e)!=="svelte-1ak6xu"&&(e.innerHTML=a),this.h()},h(){f(e,"class","border border-dashed py-20 text-gray-500")},m(n,_){j(n,e,_)},p:le,d(n){n&&b(e)}}}function ye(c){let e,a,n='<tr><th class="text-left px-4 py-2 font-medium text-gray-900">Tanggal</th> <th class="text-left px-4 py-2 font-medium text-gray-900">Name</th> <th class="text-left px-4 py-2 font-medium text-gray-900">Status</th> <th class="text-left px-4 py-2 font-medium text-gray-900">Notes</th></tr>',_,p,t=X(c[0]),s=[];for(let l=0;l<t.length;l+=1)s[l]=Q(J(c,t,l));return{c(){e=m("table"),a=m("thead"),a.innerHTML=n,_=E(),p=m("tbody");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=g(l,"TABLE",{class:!0});var h=Y(e);a=g(h,"THEAD",{class:!0,"data-svelte-h":!0}),B(a)!=="svelte-1b4wpof"&&(a.innerHTML=n),_=C(h),p=g(h,"TBODY",{class:!0});var r=Y(p);for(let o=0;o<s.length;o+=1)s[o].l(r);r.forEach(b),h.forEach(b),this.h()},h(){f(a,"class","ltr:text-left rtl:text-right"),f(p,"class","divide-y divide-gray-200"),f(e,"class","min-w-full divide-y-2 divide-gray-200 bg-white text-sm")},m(l,h){j(l,e,h),i(e,a),i(e,_),i(e,p);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(p,null)},p(l,h){if(h&7){t=X(l[0]);let r;for(r=0;r<t.length;r+=1){const o=J(l,t,r);s[r]?s[r].p(o,h):(s[r]=Q(o),s[r].c(),s[r].m(p,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(l){l&&b(e),se(s,l)}}}function Q(c){let e,a,n=H(c[11].createdAt).format("DD-MM-YYYY")+"",_,p,t,s=c[11].name+"",l,h,r,o=c[11].status+"",M,D,x,v=(c[11].note||"")+"",u,T,L,d,w="Edit",k,A,S;function W(){return c[5](c[11])}return{c(){e=m("tr"),a=m("td"),_=U(n),p=E(),t=m("td"),l=U(s),h=E(),r=m("td"),M=U(o),D=E(),x=m("td"),u=U(v),T=E(),L=m("td"),d=m("button"),d.textContent=w,k=E(),this.h()},l(I){e=g(I,"TR",{});var y=Y(e);a=g(y,"TD",{class:!0});var z=Y(a);_=V(z,n),z.forEach(b),p=C(y),t=g(y,"TD",{class:!0});var P=Y(t);l=V(P,s),P.forEach(b),h=C(y),r=g(y,"TD",{class:!0});var $=Y(r);M=V($,o),$.forEach(b),D=C(y),x=g(y,"TD",{class:!0});var q=Y(x);u=V(q,v),q.forEach(b),T=C(y),L=g(y,"TD",{class:!0});var F=Y(L);d=g(F,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),B(d)!=="svelte-1w9xbvj"&&(d.textContent=w),F.forEach(b),k=C(y),y.forEach(b),this.h()},h(){f(a,"class","whitespace-nowrap px-4 py-2 text-gray-700"),f(t,"class","whitespace-nowrap px-4 py-2 font-medium text-gray-900"),f(r,"class","whitespace-nowrap px-4 py-2 text-gray-700"),f(x,"class","whitespace-nowrap px-4 py-2 text-gray-700"),f(d,"type","button"),f(d,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"),f(L,"class","whitespace-nowrap px-4 py-2 text-gray-700")},m(I,y){j(I,e,y),i(e,a),i(a,_),i(e,p),i(e,t),i(t,l),i(e,h),i(e,r),i(r,M),i(e,D),i(e,x),i(x,u),i(e,T),i(e,L),i(L,d),i(e,k),A||(S=O(d,"click",W),A=!0)},p(I,y){c=I,y&1&&n!==(n=H(c[11].createdAt).format("DD-MM-YYYY")+"")&&R(_,n),y&1&&s!==(s=c[11].name+"")&&R(l,s),y&1&&o!==(o=c[11].status+"")&&R(M,o),y&1&&v!==(v=(c[11].note||"")+"")&&R(u,v)},d(I){I&&b(e),A=!1,S()}}}function xe(c){let e,a,n,_="Catatan",p,t,s,l,h="Simpan",r,o,M="Hapus Upgrade",D,x;return{c(){e=m("form"),a=m("div"),n=m("label"),n.textContent=_,p=E(),t=m("textarea"),s=E(),l=m("button"),l.textContent=h,r=E(),o=m("button"),o.textContent=M,this.h()},l(v){e=g(v,"FORM",{class:!0});var u=Y(e);a=g(u,"DIV",{class:!0});var T=Y(a);n=g(T,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),B(n)!=="svelte-rpdbpz"&&(n.textContent=_),p=C(T),t=g(T,"TEXTAREA",{class:!0,id:!0,placeholder:!0}),Y(t).forEach(b),T.forEach(b),s=C(u),l=g(u,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),B(l)!=="svelte-1lszuks"&&(l.textContent=h),r=C(u),o=g(u,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),B(o)!=="svelte-q13wdd"&&(o.textContent=M),u.forEach(b),this.h()},h(){f(n,"for","pertemuan"),f(n,"class","font-medium"),f(t,"class","bg-gray-50 border border-gray-300 outline-none text-gray-900 text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5 placeholder-gray-400"),f(t,"id","note"),f(t,"placeholder","Catatan"),f(a,"class","space-y-1"),f(l,"type","submit"),f(l,"class","inline-flex justify-center items-center space-x-2 border font-semibold focus:outline-none w-full px-4 py-3 leading-6 rounded border-yellow-500 bg-yellow-500 text-white hover:text-white hover:bg-yellow-800 hover:border-yellow-800 focus:ring focus:ring-yellow-500 focus:ring-opacity-50 active:bg-yellow-700 active:border-yellow-700"),f(o,"type","button"),f(o,"class","bg-red-50 w-full text-red-500 text-sm px-3 py-2"),f(e,"class","p-4 space-y-4")},m(v,u){j(v,e,u),i(e,a),i(a,n),i(a,p),i(a,t),K(t,c[1].note),i(e,s),i(e,l),i(e,r),i(e,o),D||(x=[O(t,"input",c[6]),O(o,"click",c[4]),O(e,"submit",re(c[3]))],D=!0)},p(v,u){u&2&&K(t,v[1].note)},d(v){v&&b(e),D=!1,ne(x)}}}function we(c){let e,a,n,_='<div class="text-xl md:text-3xl">Upgrade</div>',p,t,s,l='<input id="datepicker" class="px-3 py-2 w-full border outline-none focus:border-orange-400" type="text"/>',h,r,o,M,D;function x(d,w){return d[0].length?ye:be}let v=x(c),u=v(c);function T(d){c[7](d)}let L={width:"max-w-lg",title:"Edit upgrade",$$slots:{default:[xe]},$$scope:{ctx:c}};return c[2]!==void 0&&(L.show=c[2]),o=new ge({props:L}),ee.push(()=>ie(o,"show",T)),{c(){e=m("div"),a=m("div"),n=m("div"),n.innerHTML=_,p=E(),t=m("div"),s=m("div"),s.innerHTML=l,h=E(),u.c(),r=E(),ce(o.$$.fragment),this.h()},l(d){e=g(d,"DIV",{});var w=Y(e);a=g(w,"DIV",{class:!0});var k=Y(a);n=g(k,"DIV",{class:!0,"data-svelte-h":!0}),B(n)!=="svelte-1vmldh7"&&(n.innerHTML=_),p=C(k),t=g(k,"DIV",{class:!0});var A=Y(t);s=g(A,"DIV",{class:!0,"data-svelte-h":!0}),B(s)!=="svelte-1cjz4d8"&&(s.innerHTML=l),h=C(A),u.l(A),A.forEach(b),k.forEach(b),w.forEach(b),r=C(d),ue(o.$$.fragment,d),this.h()},h(){f(n,"class","flex flex-col md:flex-row gap-3 md:justify-between"),f(s,"class","lg:w-96 max-w-full mb-3"),f(t,"class","mt-10 overflow-x-auto"),f(a,"class","max-w-7xl mx-auto")},m(d,w){j(d,e,w),i(e,a),i(a,n),i(a,p),i(a,t),i(t,s),i(t,h),u.m(t,null),j(d,r,w),fe(o,d,w),D=!0},p(d,[w]){v===(v=x(d))&&u?u.p(d,w):(u.d(1),u=v(d),u&&(u.c(),u.m(t,null)));const k={};w&16386&&(k.$$scope={dirty:w,ctx:d}),!M&&w&4&&(M=!0,k.show=d[2],te(()=>M=!1)),o.$set(k)},i(d){D||(pe(o.$$.fragment,d),D=!0)},o(d){he(o.$$.fragment,d),D=!1},d(d){d&&(b(e),b(r)),u.d(),me(o,d)}}}function De(c,e,a){let n=[],_=H().subtract(1,"month").format("YYYY-MM-DD"),p=H().format("YYYY-MM-DD"),t={};async function s(){a(0,n=await N.upgrade.where("createdAt").between(_,H(p).add(1,"day").format("YYYY-MM-DD")).reverse().sortBy("createdAt"))}let l=!1;function h(){t.id?N.upgrade.put(t):(a(1,t.id=_e(),t),a(1,t.createdAt=H().format("YYYY-MM-DD"),t),N.upgrade.add(t)),G("upgrade",t),a(2,l=!1),s()}ve.subscribe("upgrade",()=>{s()});function r(){N.upgrade.delete(t.id),a(2,l=!1),s(),G("upgrade",t,"delete")}ae(()=>{setTimeout(()=>{new easepick.create({element:document.getElementById("datepicker"),css:["https://cdn.jsdelivr.net/npm/@easepick/core@1.2.1/dist/index.css","https://cdn.jsdelivr.net/npm/@easepick/range-plugin@1.2.1/dist/index.css"],plugins:["RangePlugin"],RangePlugin:{tooltip:!0},setup(v){v.on("select",u=>{const{end:T,start:L}=u.detail;_=H(L).format("YYYY-MM-DD"),p=H(T).format("YYYY-MM-DD"),s()})}}).setDateRange(_,p),s()},100)});const o=x=>{a(1,t=x),a(2,l=!0)};function M(){t.note=this.value,a(1,t)}function D(x){l=x,a(2,l)}return[n,t,l,h,r,o,M,D]}class Le extends oe{constructor(e){super(),de(this,e,De,we,Z,{})}}export{Le as component};
