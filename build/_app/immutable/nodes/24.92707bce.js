import{s as ka,f as P,a as O,g as N,A as Sa,c as U,h as _,d as E,j as M,i as $,y as ma,o as Pa,x as m,D as Na,l as q,m as z,n as Z}from"../chunks/scheduler.2ba080f3.js";import{e as Da}from"../chunks/each.e59479a4.js";import{S as fa,i as _a}from"../chunks/index.e182e4d1.js";import{d as u,a as T}from"../chunks/schema.b06cae25.js";import"../chunks/id.be7ae700.js";import{j as Ma}from"../chunks/helper.1bedf073.js";function ca(D,t,i){const g=D.slice();return g[4]=t[i],g[6]=i,g}function Ia(D){let t,i,g='<tr><th class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">No</th> <th class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">Item</th> <th class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">Data</th> <th class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">Penjelasan</th></tr>',r,n,l=Da(D[0]),e=[];for(let s=0;s<l.length;s+=1)e[s]=Ea(ca(D,l,s));return{c(){t=P("table"),i=P("thead"),i.innerHTML=g,r=O(),n=P("tbody");for(let s=0;s<e.length;s+=1)e[s].c();this.h()},l(s){t=N(s,"TABLE",{class:!0});var o=_(t);i=N(o,"THEAD",{class:!0,"data-svelte-h":!0}),Sa(i)!=="svelte-ba5z5m"&&(i.innerHTML=g),r=U(o),n=N(o,"TBODY",{class:!0});var A=_(n);for(let h=0;h<e.length;h+=1)e[h].l(A);A.forEach(E),o.forEach(E),this.h()},h(){M(i,"class","ltr:text-left rtl:text-right"),M(n,"class","divide-y divide-gray-200"),M(t,"class","min-w-full divide-y-2 divide-gray-200 bg-white text-sm")},m(s,o){$(s,t,o),m(t,i),m(t,r),m(t,n);for(let A=0;A<e.length;A+=1)e[A]&&e[A].m(n,null)},p(s,o){if(o&1){l=Da(s[0]);let A;for(A=0;A<l.length;A+=1){const h=ca(s,l,A);e[A]?e[A].p(h,o):(e[A]=Ea(h),e[A].c(),e[A].m(n,null))}for(;A<e.length;A+=1)e[A].d(1);e.length=l.length}},d(s){s&&E(t),Na(e,s)}}}function Ea(D){let t,i,g=D[6]+1+"",r,n,l,e=D[4].ITEM+"",s,o,A,h=D[4].DISPLAY_DATA+"",I,L,k,f=D[4].PENJELASAN+"",c,b;return{c(){t=P("tr"),i=P("td"),r=q(g),n=O(),l=P("td"),s=q(e),o=O(),A=P("td"),I=q(h),L=O(),k=P("td"),c=q(f),b=O(),this.h()},l(S){t=N(S,"TR",{});var d=_(t);i=N(d,"TD",{class:!0});var v=_(i);r=z(v,g),v.forEach(E),n=U(d),l=N(d,"TD",{class:!0});var K=_(l);s=z(K,e),K.forEach(E),o=U(d),A=N(d,"TD",{class:!0});var J=_(A);I=z(J,h),J.forEach(E),L=U(d),k=N(d,"TD",{class:!0});var x=_(k);c=z(x,f),x.forEach(E),b=U(d),d.forEach(E),this.h()},h(){M(i,"class","whitespace-nowrap px-4 py-2 font-medium text-gray-900"),M(l,"class","whitespace-nowrap px-4 py-2 text-gray-700"),M(A,"class","whitespace-nowrap px-4 py-2 text-gray-700"),M(k,"class","whitespace-nowrap px-4 py-2 text-gray-700")},m(S,d){$(S,t,d),m(t,i),m(i,r),m(t,n),m(t,l),m(l,s),m(t,o),m(t,A),m(A,I),m(t,L),m(t,k),m(k,c),m(t,b)},p(S,d){d&1&&e!==(e=S[4].ITEM+"")&&Z(s,e),d&1&&h!==(h=S[4].DISPLAY_DATA+"")&&Z(I,h),d&1&&f!==(f=S[4].PENJELASAN+"")&&Z(c,f)},d(S){S&&E(t)}}}function Ya(D){let t,i='<div class="mb-4 w-full md:w-96"><input placeholder="Pilih Range Tanggal" class="bg-gray-50 border border-gray-300 outline-none text-gray-900 text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5 placeholder-gray-400" id="datepicker"/></div> <div class="mb-3"></div>',g,r,n=Ia(D);return{c(){t=P("div"),t.innerHTML=i,g=O(),r=P("div"),n&&n.c(),this.h()},l(l){t=N(l,"DIV",{"data-svelte-h":!0}),Sa(t)!=="svelte-anbnrl"&&(t.innerHTML=i),g=U(l),r=N(l,"DIV",{class:!0});var e=_(r);n&&n.l(e),e.forEach(E),this.h()},h(){M(r,"class","overflow-x-auto")},m(l,e){$(l,t,e),$(l,g,e),$(l,r,e),n&&n.m(r,null)},p(l,[e]){n.p(l,e)},i:ma,o:ma,d(l){l&&(E(t),E(g),E(r)),n&&n.d()}}}function La(D,t,i){let g=[],r=u().subtract(1,"month").set("date",21).format("YYYY-MM-DD"),n=u().add(1,"month").set("date",20).format("YYYY-MM-DD");async function l(){const e=await T.peserta.toArray(),s=e.filter(a=>a.status=="K").length,o=e.filter(a=>a.is_guru).length,A=e.filter(a=>a.status=="P").length,h=await T.hp.count(),I=await T.im.count(),L=await T.ia.count(),k=await T.groups.count();let f=Ma(await T.hp.toArray());const c=await T.presences.where("tanggal").between(r,u(n).add(1,"day").format("YYYY-MM-DD")).toArray(),b=c.reduce((a,p)=>a+(p.buletin_fisik||0),0);console.log(b);const S=c.reduce((a,p)=>a+(p.buletin_digital||0),0),d=c.reduce((a,p)=>a+(p.buletin_kontak||0),0),v=c.reduce((a,p)=>a+(p.bts||0),0),K=c.filter(a=>a.present).length,J=c.filter(a=>a.kontrol).length,x=c.filter(a=>a.kontak).length,aa=await T.presence_week.where("tanggal").between(r,u(n).add(1,"day").format("YYYY-MM-DD")).toArray(),pa=aa.filter(a=>a.status=="Terlaksana"||a.status=="Kosong").length,Y=c.length,j=Math.ceil(b/Y*e.length)||0,H=Math.ceil(S/Y*e.length)||0,R=Math.ceil(d/Y*e.length)||0,ea=Math.ceil(v/Y*e.length)||0,ta=Math.ceil(K/Y*e.length);Math.ceil(J/Y*e.length);const na=Math.ceil(x/Y*e.length),Aa=Math.ceil(pa/aa.length*k);let B=await T.hs.where("tanggal").between(r,u(n).add(1,"day").format("YYYY-MM-DD")).first();const w=await T.jm.where("tanggal").between(r,u(n).add(1,"day").format("YYYY-MM-DD")).first(),W=await T.pu.where("tanggal").between(r,u(n).add(1,"day").format("YYYY-MM-DD")).toArray(),ra=W.reduce((a,p)=>a+(p.peserta||0),0),F=await T.mt.where("tanggal").between(r,u(n).add(1,"day").format("YYYY-MM-DD")).toArray(),sa=F.reduce((a,p)=>a+(p.peserta||0),0),Q=await T.upgrade.where("createdAt").between(r,u(n).add(1,"day").format("YYYY-MM-DD")).toArray(),C=Q.filter(a=>a.status=="P ke K").length,G=Q.filter(a=>a.status=="HP ke P").length,V=Q.filter(a=>a.status=="IM ke HP").length,y=await T.mutasi.where("createdAt").between(r,u(n).add(1,"day").format("YYYY-MM-DD")).toArray(),la=y.filter(a=>a.status=="Masuk"&&a.keanggotaan=="K").length,ia=y.filter(a=>a.status=="Masuk"&&a.keanggotaan=="P").length,oa=y.filter(a=>a.status=="Keluar"&&a.keanggotaan=="K").length,ua=y.filter(a=>a.status=="Keluar"&&a.keanggotaan=="P").length,ga=y.filter(a=>a.status=="Berhenti"&&a.keanggotaan=="K").length,ha=y.filter(a=>a.status=="Berhenti"&&a.keanggotaan=="P").length,X=await T.ia.where("createdAt").between(r,u(n).add(1,"day").format("YYYY-MM-DD")).toArray(),da=X.filter(a=>a.status=="IA dari HP").length,Ta=await T.im.where("createdAt").between(r,u(n).add(1,"day").format("YYYY-MM-DD")).count();i(0,g=[{ITEM:"ANGGOTA",DATA:s,DISPLAY_DATA:`${s} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah total dosen dan asisten dosen bulan ini"},{ITEM:"DOSEN",DATA:o,DISPLAY_DATA:`${o} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah total dosen bulan ini"},{ITEM:"ASISTEN DOSEN",DATA:s-o,DISPLAY_DATA:`${s-o} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah total asisten dosen bulan ini"},{ITEM:"SISWA",DATA:A,DISPLAY_DATA:`${A} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah total siswa bulan ini"},{ITEM:"HP",DATA:h,DISPLAY_DATA:`${h} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah total HP bulan ini"},{ITEM:"IM",DATA:I,DISPLAY_DATA:`${I} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah total IM bulan ini"},{ITEM:"Jumlah HM",DATA:k,DISPLAY_DATA:`${k} Kelompok`,SATUAN:"Kelompok",PENJELASAN:"kelompok HM bulan ini"},{ITEM:"Jumlah HP",DATA:f,DISPLAY_DATA:`${f} Kelompok`,SATUAN:"Kelompok",PENJELASAN:"kelompok HP bulan ini"},{ITEM:"Kaaffah Ofline",DATA:j,DISPLAY_DATA:`${j} Eksemplar`,SATUAN:"Eksemplar",PENJELASAN:" penyebaran buletin Kaffah (kertas) secara ofline bulan ini"},{ITEM:"IA",DATA:L,DISPLAY_DATA:`${L} Orang`,SATUAN:"Orang",PENJELASAN:"Orang kontakan yang bukan Maasudah / yang tidak maju ke tahap"},{ITEM:"BTS",DATA:ea,DISPLAY_DATA:`${ea} Eksemplar`,SATUAN:"Eksemplar",PENJELASAN:" penyebaran Buletin Teman Surga bulan ini"},{ITEM:"Kaffah terkontak",DATA:R,DISPLAY_DATA:`${R} Eksemplar`,SATUAN:"Eksemplar",PENJELASAN:"  Rata-rata Kaffah yang terkontak tiap pekan"},{ITEM:"Kaffah Digital",DATA:H,DISPLAY_DATA:`${H} Eksemplar`,SATUAN:"Eksemplar",PENJELASAN:"Eksemplar penyebaran Kaffah digital oleh syabah bulan ini"},{ITEM:"Kaffah Total",DATA:j+H+R,DISPLAY_DATA:`${j+H+R} Eksemplar`,SATUAN:"Eksemplar",PENJELASAN:"Jumlah Penyebaran Kaffah Offline dan Online"},{ITEM:"Kehadiran kursus",DATA:ta,DISPLAY_DATA:`${ta} orang`,SATUAN:"orang",PENJELASAN:"Rata2 syab yang hadir kursus tiap pekan"},{ITEM:"Kunjungan",DATA:J,DISPLAY_DATA:`${J} orang`,SATUAN:"Orang",PENJELASAN:"Rata2syabah yang di MTB tiap pekan"},{ITEM:"Pelaku IM",DATA:na,DISPLAY_DATA:`${na} orang`,SATUAN:"Orang",PENJELASAN:"Rata2 syabah yg lakukan IM tiap pekan"},{ITEM:"MT Resmi",DATA:F.length,DISPLAY_DATA:`${F.length} forum`,SATUAN:"Jumlah",PENJELASAN:"Jumlah forum MT di cabang"},{ITEM:"Jumlah Peserta MT Resmi",DATA:sa,DISPLAY_DATA:`${sa} Orang`,SATUAN:"orang",PENJELASAN:"Jumlah eksternal yang hadir dalam MT Resmi 000 bulan ini"},{ITEM:"Kehadiran HS",DATA:B?B.peserta:0,DISPLAY_DATA:`${B?B.peserta:0} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah Adho yang hadir di HS"},{ITEM:"JM",DATA:w?1:0,DISPLAY_DATA:`${w?1:0}`,SATUAN:"frekuensi",PENJELASAN:"Diskusi bulanan terbuka/JM (c/ ada 1, tdk ada 0)"},{ITEM:"Kehadiran JM",DATA:w?w.peserta:0,DISPLAY_DATA:`${w?w.peserta:0} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah Syabah yang hadir JM"},{ITEM:"PU",DATA:W.length,DISPLAY_DATA:`${W.length} forum`,SATUAN:"jumlah  forum",PENJELASAN:"Jumlah forum PU di cabang"},{ITEM:"Peserta PU",DATA:ra,DISPLAY_DATA:`${ra} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah Peserta PU yang hadir di setiap forum PU"},{ITEM:"Laporan-Dosen",DATA:Aa,DISPLAY_DATA:`${Aa} Kelompok`,SATUAN:"Kelompok",PENJELASAN:"Kelompok Rata2laporan dosen yang masuk tiap pekan"},{ITEM:"Anggota Upgrade",DATA:C,DISPLAY_DATA:`${C} Orang`,SATUAN:"orang",PENJELASAN:"Jumlah Penambahan Anggota dari Darisah"},{ITEM:"Anggota Masuk",DATA:la,DISPLAY_DATA:`${la} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah Penambahan Anggota dari mutasi masuk"},{ITEM:"Anggota Keluar",DATA:oa,DISPLAY_DATA:`${oa} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah pengurangan Anngota karena mutasi keluar"},{ITEM:"Anggota Mundur",DATA:ga,DISPLAY_DATA:`${ga} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah Pengurangan Anggota karena mundur/keluar"},{ITEM:"Siswa Rekrut",DATA:G,DISPLAY_DATA:`${G} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah Penambahan siswa dari rekrut HP"},{ITEM:"Siswa Upgrade",DATA:C,DISPLAY_DATA:`${C} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah pengurangan siswa karena naik jadi Anggota"},{ITEM:"Siswa Masuk",DATA:ia,DISPLAY_DATA:`${ia} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah Penambahan Siswa dari mutasi masuk"},{ITEM:"Siswa Keluar",DATA:ua,DISPLAY_DATA:`${ua} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah Pengurangan Siswa karena mutasi keluar"},{ITEM:"Siswa Mundur",DATA:ha,DISPLAY_DATA:`${ha} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah Pengurangan Siswa karena mundur/keluar"},{ITEM:"HP Rekrut",DATA:V,DISPLAY_DATA:`${V} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah Penambahan HP dari rekrut IM"},{ITEM:"HP Upgrade",DATA:G,DISPLAY_DATA:`${G} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah Pengurangan HP karena direkrut menjadi Siswa"},{ITEM:"HP Mundur",DATA:da,DISPLAY_DATA:`${da} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah Pengurangan HP karena mundur/keluar"},{ITEM:"IM Rekrut",DATA:Ta,DISPLAY_DATA:`${Ta} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah Penambahan IM baru, juga upgrade dari IA, PU, dll"},{ITEM:"IM UP-Grade",DATA:V,DISPLAY_DATA:`${V} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah pengurangan IM karena naik menjadi HP"},{ITEM:"IM Mundur",DATA:"",DISPLAY_DATA:"",SATUAN:"Orang",PENJELASAN:"Jumlah Pengurangan IM karena mundur/ tak mau dikontak lagi, dil"},{ITEM:"IA Baru",DATA:X.length,DISPLAY_DATA:`${X.length} Orang`,SATUAN:"Orang",PENJELASAN:"Jumlah penambahan IA baru, dari IM, HP, D yang mundur"},{ITEM:"IA Upgrade",DATA:"",DISPLAY_DATA:"",SATUAN:"Orang",PENJELASAN:"Jumlah IA yang terupgrade menjadi IM bulan ini"},{ITEM:"IM baru",DATA:"",DISPLAY_DATA:"",SATUAN:"Orang",PENJELASAN:"jumlah kontakan IM baru tanpa melalui IA dulu"}])}return Pa(()=>{new Date().getDate()<21?(r=u().subtract(1,"month").set("date",21).format("YYYY-MM-DD"),n=u().set("date",20).format("YYYY-MM-DD")):(r=u().set("date",21).format("YYYY-MM-DD"),n=u().add(1,"month").set("date",20).format("YYYY-MM-DD")),l(),new easepick.create({element:document.getElementById("datepicker"),css:["https://cdn.jsdelivr.net/npm/@easepick/core@1.2.1/dist/index.css","https://cdn.jsdelivr.net/npm/@easepick/range-plugin@1.2.1/dist/index.css"],plugins:["RangePlugin"],RangePlugin:{tooltip:!0},setup(s){s.on("select",o=>{const{end:A,start:h}=o.detail;r=u(h).format("YYYY-MM-DD"),n=u(A).format("YYYY-MM-DD")})}}).setDateRange(r,n)}),[g]}class $a extends fa{constructor(t){super(),_a(this,t,La,Ya,ka,{})}}export{$a as component};
